<!DOCTYPE html>
<html lang="en" theme="dark">

<head>
    <header></header>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title i18n="transcribe.title">ç¦»çº¿è½¬å†™ - YtDownloader</title>
    <link rel="stylesheet" href="../assets/css/index.css">
    <script src="../src/common.js" defer></script>
    <script src="../src/transcribe.js" defer></script>
    <!-- Translating -->
    <script>window.i18n = new (require('../translations/i18n'));</script>
</head>

<body>
    <!-- èœå•å›¾æ ‡å’Œä¸»é¢˜åˆ‡æ¢ -->
    <img id="menuIcon" src="../images/menu.png" alt="Menu">
    <div id="menu">
        <select id="themeToggle">
            <option value="dark">ğŸŒ™ Dark</option>
            <option value="light">â˜€ï¸ Light</option>
            <option value="frappe">ğŸŒŠ Frappe</option>
            <option value="onedark">ğŸŒ² OneDark</option>
            <option value="matrix">ğŸ’Š Matrix</option>
            <option value="github">ğŸ™ GitHub</option>
            <option value="latte">ğŸŒ» Latte</option>
            <option value="solarized-dark">ğŸŒ… Solarized Dark</option>
        </select>
        <a class="menuItem" id="backToMain">â† è¿”å›ä¸»é¡µ</a>
        <a class="menuItem" id="openDownloadsFolder">æ‰“å¼€ä¸‹è½½ç›®å½•</a>
    </div>

    <div class="container">
        <h1 i18n="transcribe.heading">ç¦»çº¿è§†é¢‘è½¬å†™</h1>
        <p i18n="transcribe.description">ä¸‹è½½è§†é¢‘å¹¶ä½¿ç”¨ Whisper AI è¿›è¡Œæœ¬åœ°è½¬å†™</p>

        <!-- ä½œä¸šåˆ›å»ºè¡¨å• -->
        <div class="container" style="margin-top: 20px;">
            <h2 i18n="transcribe.createJob">åˆ›å»ºè½¬å†™ä½œä¸š</h2>
            <form id="job-form">
                <!-- URL è¾“å…¥ -->
                <div style="margin-bottom: 15px; text-align: left;">
                    <label for="url-input" i18n="transcribe.urlLabel">è§†é¢‘ URL:</label><br>
                    <input type="text"
                           id="url-input"
                           placeholder="https://www.youtube.com/watch?v=..."
                           style="width: 100%; max-width: 500px; padding: 10px; margin-top: 5px; border-radius: 5px; border: none; background-color: var(--box-toggle); color: var(--text); font-family: 'JetBrains', monospace;"
                           required>
                </div>

                <!-- è¾“å‡ºç›®å½• -->
                <div style="margin-bottom: 15px; text-align: left;">
                    <label for="output-dir-input" i18n="transcribe.outputDirLabel">è¾“å‡ºç›®å½•:</label><br>
                    <div style="display: flex; gap: 10px; align-items: center; margin-top: 5px;">
                        <input type="text"
                               id="output-dir-input"
                               readonly
                               style="flex: 1; padding: 10px; border-radius: 5px; border: none; background-color: var(--box-toggle); color: var(--text); font-family: 'JetBrains', monospace;">
                        <button type="button"
                                id="select-output-dir"
                                class="blueBtn"
                                style="padding: 10px 15px; margin: 0;">
                            é€‰æ‹©ç›®å½•
                        </button>
                    </div>
                </div>

                <!-- è¯­è¨€é€‰æ‹© -->
                <div style="margin-bottom: 15px; text-align: left;">
                    <label for="language-select" i18n="transcribe.languageLabel">è½¬å†™è¯­è¨€:</label><br>
                    <select id="language-select"
                            style="width: 200px; padding: 10px; margin-top: 5px; border-radius: 5px; border: none; background-color: var(--box-toggle); color: var(--text); font-family: 'Ubuntu';">
                        <option value="auto" i18n="transcribe.autoDetect">è‡ªåŠ¨æ£€æµ‹</option>
                        <option value="zh">ä¸­æ–‡</option>
                        <option value="en">English</option>
                        <option value="ja">æ—¥æœ¬èª</option>
                        <option value="ko">í•œêµ­ì–´</option>
                        <option value="es">EspaÃ±ol</option>
                        <option value="fr">FranÃ§ais</option>
                        <option value="de">Deutsch</option>
                        <option value="it">Italiano</option>
                        <option value="pt">PortuguÃªs</option>
                        <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
                    </select>
                </div>

                <!-- é€‰é¡¹ -->
                <div style="margin-bottom: 20px; text-align: left;">
                    <label style="display: flex; align-items: center; cursor: pointer;">
                        <input type="checkbox"
                               id="keep-video-checkbox"
                               class="cb"
                               style="margin-right: 8px;">
                        <span i18n="transcribe.keepVideo">ä¿ç•™è§†é¢‘æ–‡ä»¶</span>
                    </label>
                </div>

                <!-- æäº¤æŒ‰é’® -->
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <button type="submit"
                            class="submitBtn"
                            id="submit-job-btn"
                            style="flex: 1; min-width: 150px;">
                        <span i18n="transcribe.submitBtn">å¼€å§‹è½¬å†™</span>
                    </button>
                    <button type="button"
                            class="blueBtn"
                            id="check-deps-btn"
                            onclick="checkDependencies()"
                            style="flex: 1; min-width: 150px;">
                        <span i18n="transcribe.checkDeps">æ£€æŸ¥ç¦»çº¿ä¾èµ–</span>
                    </button>
                </div>
            </form>
        </div>

        <!-- ä¾èµ–çŠ¶æ€æ£€æŸ¥ -->
        <div class="container" id="deps-status" style="margin-top: 20px; display: none;">
            <h3 i18n="transcribe.depsCheck">ä¾èµ–æ£€æŸ¥</h3>
            <div id="deps-list"></div>
        </div>

        <!-- ä½œä¸šåˆ—è¡¨ -->
        <div class="container" style="margin-top: 30px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <h2 i18n="transcribe.jobList">ä½œä¸šåˆ—è¡¨</h2>
                <button id="toggle-logs-btn" class="blueBtn" style="padding: 8px 12px; font-size: medium;">
                    <span i18n="transcribe.toggleLogs">æ˜¾ç¤ºæ—¥å¿—</span>
                </button>
            </div>

            <div id="job-list-container">
                <ul id="job-list" style="list-style: none; padding: 0; margin: 0;">
                    <!-- ä½œä¸šé¡¹ç›®å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                </ul>

                <div id="no-jobs-message" style="text-align: center; padding: 40px; color: var(--text); opacity: 0.6;">
                    <p i18n="transcribe.noJobs">æš‚æ— ä½œä¸š</p>
                </div>
            </div>
        </div>

        <!-- æ—¥å¿—é¢æ¿ -->
        <div class="container" id="log-panel" style="margin-top: 20px; display: none;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                <h3 i18n="transcribe.logs">å®æ—¶æ—¥å¿—</h3>
                <button id="clear-logs-btn" class="blueBtn" style="padding: 5px 10px; font-size: small;">
                    <span i18n="transcribe.clearLogs">æ¸…ç©º</span>
                </button>
            </div>
            <pre id="job-log"
                 style="background-color: var(--box-toggle);
                        color: var(--text);
                        padding: 15px;
                        border-radius: 8px;
                        text-align: left;
                        font-family: 'JetBrains', monospace;
                        font-size: small;
                        max-height: 300px;
                        overflow-y: auto;
                        white-space: pre-wrap;
                        margin: 0;"></pre>
        </div>
    </div>

    <!-- é”™è¯¯æç¤º -->
    <div id="error-toast"
         style="position: fixed;
                top: 20px;
                right: 20px;
                background-color: var(--redBtn);
                color: white;
                padding: 15px;
                border-radius: 8px;
                display: none;
                z-index: 1000;
                max-width: 300px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);">
    </div>

    <!-- æˆåŠŸæç¤º -->
    <div id="success-toast"
         style="position: fixed;
                top: 20px;
                right: 20px;
                background-color: var(--greenBtn);
                color: white;
                padding: 15px;
                border-radius: 8px;
                display: none;
                z-index: 1000;
                max-width: 300px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);">
    </div>

    <!-- ä¾èµ–æ£€æŸ¥ç»“æœæ¨¡æ€æ¡† -->
    <div id="deps-modal"
         style="position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.7);
                display: none;
                z-index: 2000;
                justify-content: center;
                align-items: center;">
        <div style="background-color: var(--box-separation);
                     color: var(--text);
                     padding: 30px;
                     border-radius: 12px;
                     max-width: 600px;
                     width: 90%;
                     max-height: 80vh;
                     overflow-y: auto;
                     box-shadow: 0 8px 32px rgba(0,0,0,0.3);
                     position: relative;">

            <!-- å…³é—­æŒ‰é’® -->
            <button id="close-deps-modal"
                    style="position: absolute;
                           top: 15px;
                           right: 15px;
                           background: none;
                           border: none;
                           color: var(--text);
                           font-size: 24px;
                           cursor: pointer;
                           padding: 5px;
                           opacity: 0.7;"
                    onmouseover="this.style.opacity='1'"
                    onmouseout="this.style.opacity='0.7'">
                Ã—
            </button>

            <!-- æ ‡é¢˜ -->
            <h2 style="margin-top: 0; margin-bottom: 20px; color: var(--text);">
                <span i18n="transcribe.depsCheckTitle">ç¦»çº¿ä¾èµ–æ£€æŸ¥ç»“æœ</span>
            </h2>

            <!-- æ£€æŸ¥æ—¶é—´ -->
            <div id="deps-check-time" style="margin-bottom: 20px; opacity: 0.7; font-size: small;">
                <!-- æ£€æŸ¥æ—¶é—´å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
            </div>

            <!-- ä¾èµ–åˆ—è¡¨ -->
            <div id="deps-results-list">
                <!-- ä¾èµ–æ£€æŸ¥ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
            </div>

            <!-- æ“ä½œå»ºè®® -->
            <div id="deps-recommendations" style="margin-top: 20px; padding: 15px; background-color: var(--box-toggle); border-radius: 8px;">
                <h4 style="margin-top: 0; margin-bottom: 10px;">
                    <span i18n="transcribe.depsRecommendations">æ“ä½œå»ºè®®</span>
                </h4>
                <div id="deps-recommendations-content">
                    <!-- æ“ä½œå»ºè®®å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                </div>
            </div>

            <!-- æ“ä½œæŒ‰é’® -->
            <div style="margin-top: 20px; text-align: right;">
                <button id="run-setup-offline-btn"
                        class="blueBtn"
                        style="margin-right: 10px;">
                    <span i18n="transcribe.runSetupOffline">è¿è¡Œ setup-offline</span>
                </button>
                <button id="close-deps-modal-btn"
                        class="secondaryBtn">
                    <span i18n="transcribe.close">å…³é—­</span>
                </button>
            </div>
        </div>
    </div>
</body>

</html>